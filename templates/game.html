{% extends "base.html" %}

{% block content %}
<div class="game-container">
    <canvas id="gameCanvas"></canvas>
    <div class="game-ui">
        <!-- Health Bar -->
        <div class="health-bar-container">
            <div class="health-bar">
                <div class="health-fill" id="healthFill"></div>
            </div>
            <span class="health-text">100HP</span>
        </div>

        <!-- Minimap -->
        <canvas id="minimap" width="150" height="150"></canvas>

        <!-- Admin Panel - Only show for actual admins, not guests -->
        {% if session.is_admin and not session.is_guest %}
        <div class="admin-panel">
            <button class="admin-toggle" onclick="toggleAdminPanel()">
                <span class="action-icon">‚öôÔ∏è</span>
            </button>
            <select id="playerList" class="form-select mb-2">
                <option value="">Select Player</option>
            </select>
            <button class="btn btn-danger mb-2 w-100" onclick="executeAdminCommand('kill')">Instant Kill</button>
            <button class="btn btn-warning mb-2 w-100" onclick="executeAdminCommand('god')">Toggle God Mode</button>
            <button class="btn btn-info mb-2 w-100" onclick="executeAdminCommand('mod')">Toggle Moderator</button>
            <button class="btn btn-danger mb-2 w-100" onclick="executeAdminCommand('ban')">Ban Player</button>
            <button class="btn btn-warning mb-2 w-100" onclick="executeAdminCommand('kick')">Kick Player</button>
            <button class="btn btn-secondary mb-2 w-100" onclick="executeAdminCommand('mute')">Mute Player</button>
        </div>
        {% endif %}

        <!-- Mobile Controls -->
        <div class="controls-container">
            <!-- Left Joystick -->
            <div class="joystick-container">
                <div class="joystick-base">
                    <div class="joystick-stick"></div>
                </div>
            </div>

            <!-- Right Action Buttons -->
            <div class="action-buttons">
                <button class="action-button" id="shootButton">
                    <span class="action-icon">üéØ</span>
                </button>
                <button class="action-button" id="reloadButton">
                    <span class="action-icon">üîÑ</span>
                </button>
            </div>
        </div>

        <!-- Weapon Slots -->
        <div class="weapon-slots">
            <div class="weapon-slot" data-weapon="1">1</div>
            <div class="weapon-slot" data-weapon="2">2</div>
            <div class="weapon-slot" data-weapon="3">3</div>
            <div class="weapon-slot" data-weapon="4">4</div>
        </div>
        <div class="ammo-counter" id="ammoCounter">30/30</div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/game.js"></script>
{% endblock %}